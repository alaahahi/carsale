import{G as N,b as q,m as u,p as A,o as i,a as r,f as g,u as j,e as v,F as z,H as D,h as t,L as F,j as w,t as a,n as b,z as U,g as k,k as T,w as B,C as H}from"./app.0a6d292b.js";import{_ as I}from"./AuthenticatedLayout.f4d92de6.js";import{M as G}from"./Modal.31341f1f.js";import{a as $}from"./index.66a54824.js";/* empty css                                              */const O={class:"flex justify-between items-center"},J=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight dark:text-gray-200"}," \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621 ",-1),K=t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),P={class:"py-12"},Q={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},R={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6 mb-8"},W={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},X={class:"p-6"},Y={class:"flex items-center"},Z=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-8 w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1),tt={class:"ml-4"},et=t("p",{class:"text-sm font-medium text-gray-500"},"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0639\u0645\u0644\u0627\u0621",-1),st={class:"text-2xl font-semibold text-gray-900"},ot={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},at={class:"p-6"},nt={class:"flex items-center"},it=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-8 w-8 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1),rt={class:"ml-4"},lt=t("p",{class:"text-sm font-medium text-gray-500"},"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u0637\u0644\u0648\u0628",-1),dt={class:"text-2xl font-semibold text-gray-900"},ct={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ht={class:"p-6"},ut={class:"flex items-center"},_t=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-8 w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),mt={class:"ml-4"},pt=t("p",{class:"text-sm font-medium text-gray-500"},"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u062F\u0641\u0648\u0639",-1),xt={class:"text-2xl font-semibold text-gray-900"},gt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},vt={class:"p-6"},ft={class:"flex items-center"},yt=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-8 w-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1),wt={class:"ml-4"},bt=t("p",{class:"text-sm font-medium text-gray-500"},"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u062F\u064A\u0646",-1),kt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Ct={class:"p-6"},Mt={class:"flex items-center"},jt=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-8 w-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),zt={class:"ml-4"},Bt=t("p",{class:"text-sm font-medium text-gray-500"},"\u0639\u0645\u0644\u0627\u0621 \u0645\u062F\u064A\u0646\u0648\u0646",-1),Ht={class:"text-2xl font-semibold text-red-600"},$t={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Lt={class:"p-6"},Vt={class:"flex items-center"},St=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-8 w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1),Et={class:"ml-4"},Nt=t("p",{class:"text-sm font-medium text-gray-500"},"\u0639\u0645\u0644\u0627\u0621 \u0645\u0643\u062A\u0645\u0644\u0648\u0646",-1),qt={class:"text-2xl font-semibold text-green-600"},At={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Dt={class:"p-6"},Ft={class:"flex justify-between items-center mb-6"},Ut=t("h3",{class:"text-lg font-medium text-gray-900"},"\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621",-1),Tt=["disabled"],It={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},Gt=t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),Ot=t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),Jt=[Gt,Ot],Kt={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Pt=t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1),Qt=[Pt],Rt={key:0,class:"flex justify-center items-center py-12"},Wt=t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1),Xt=[Wt],Yt={key:1,class:"text-center py-12"},Zt=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1),te=t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"\u0644\u0627 \u064A\u0648\u062C\u062F \u0639\u0645\u0644\u0627\u0621",-1),ee=t("p",{class:"mt-1 text-sm text-gray-500"},"\u0627\u0628\u062F\u0623 \u0628\u0625\u0636\u0627\u0641\u0629 \u0639\u0645\u064A\u0644 \u062C\u062F\u064A\u062F.",-1),se=[Zt,te,ee],oe={key:2,class:"overflow-x-auto"},ae={class:"min-w-full divide-y divide-gray-200"},ne=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"#"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"\u0627\u0644\u0627\u0633\u0645"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"\u0627\u0644\u0647\u0627\u062A\u0641"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"\u0627\u0644\u0645\u0637\u0644\u0648\u0628"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"\u0627\u0644\u0645\u062F\u0641\u0648\u0639"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"\u0627\u0644\u0645\u062A\u0628\u0642\u064A"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"\u0627\u0644\u062D\u0627\u0644\u0629"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"\u0627\u0644\u0639\u0645\u0644\u064A\u0627\u062A")])],-1),ie={class:"bg-white divide-y divide-gray-200"},re={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},le={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},de={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},he={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ue={class:"px-6 py-4 whitespace-nowrap"},_e={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},me={class:"flex items-center gap-2"},pe=["onClick"],xe=["onClick"],ge={class:"p-6"},ve=t("h3",{class:"text-lg font-medium text-gray-900"},"\u062A\u0639\u062F\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0639\u0645\u064A\u0644",-1),fe=t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),ye=[fe],we=["onSubmit"],be=t("label",{for:"client_name",class:"block text-sm font-medium text-gray-700 mb-1"},"\u0627\u0644\u0627\u0633\u0645",-1),ke=t("label",{for:"client_phone",class:"block text-sm font-medium text-gray-700 mb-1"},"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641",-1),Ce={class:"flex justify-end gap-3 pt-4"},Me=["disabled"],je={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},ze=t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),Be=t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),He=[ze,Be],qe={__name:"Index",props:{url:String,cards:Array},setup($e){const l=N(),L=q(),f=u([]),d=u({total_clients:0,total_required:0,total_paid:0,total_debt:0,clients_with_debt:0,clients_paid_off:0}),_=u(!1),y=u(!1),o=u({id:null,name:"",phone:""}),m=u(!1),p=async()=>{_.value=!0;try{const e=await $.get("/getIndexClients");f.value=e.data.data,d.value=e.data.stats}catch(e){l.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0641\u064A \u062C\u0644\u0628 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0639\u0645\u0644\u0627\u0621"),console.error("Error fetching clients:",e)}finally{_.value=!1}},V=e=>{confirm("\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0639\u0645\u064A\u0644\u061F")&&L.delete(route("users.destroy",e),{onSuccess:()=>{l.success("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0639\u0645\u064A\u0644 \u0628\u0646\u062C\u0627\u062D"),p()},onError:()=>{l.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0641\u064A \u062D\u0630\u0641 \u0627\u0644\u0639\u0645\u064A\u0644")}})},S=e=>{console.log("Opening edit modal for client:",e),o.value={id:e.id,name:e.name||"",phone:e.phone||""},y.value=!0},x=()=>{console.log("Closing edit modal"),y.value=!1,o.value={id:null,name:"",phone:""}},E=async()=>{var e,c,s;if(console.log("Saving client updates:",o.value),!o.value.name||!o.value.name.trim()){l.error("\u0627\u0644\u0627\u0633\u0645 \u0645\u0637\u0644\u0648\u0628");return}if(!o.value.id){l.error("\u062E\u0637\u0623 \u0641\u064A \u0645\u0639\u0631\u0641 \u0627\u0644\u0639\u0645\u064A\u0644");return}m.value=!0;try{const n=await $.put(`/api/clients/${o.value.id}/update`,{name:o.value.name.trim(),phone:o.value.phone?o.value.phone.trim():""});console.log("Update response:",n.data),n.data&&n.data.success?(l.success(n.data.message||"\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0639\u0645\u064A\u0644 \u0628\u0646\u062C\u0627\u062D"),x(),await p()):l.error(((e=n.data)==null?void 0:e.message)||"\u062D\u062F\u062B \u062E\u0637\u0623 \u0641\u064A \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A")}catch(n){console.error("Error updating client:",n),l.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0641\u064A \u062A\u062D\u062F\u064A\u062B \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0639\u0645\u064A\u0644"),(s=(c=n.response)==null?void 0:c.data)!=null&&s.message&&l.error(n.response.data.message)}finally{m.value=!1}},h=e=>Math.round(e||0).toLocaleString(),C=e=>e>0?"text-red-600":e<0?"text-green-600":"text-gray-600",M=e=>e>0?{text:"\u0645\u062F\u064A\u0646",class:"bg-red-100 text-red-800"}:e<0?{text:"\u0644\u0647 \u0631\u0635\u064A\u062F",class:"bg-green-100 text-green-800"}:{text:"\u0645\u0643\u062A\u0645\u0644",class:"bg-gray-100 text-gray-800"};return A(()=>{p()}),(e,c)=>(i(),r(z,null,[g(j(D),{title:"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621"}),g(I,null,{header:v(()=>[t("div",O,[J,g(j(F),{href:e.route("addClients"),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 flex items-center gap-2"},{default:v(()=>[K,w(" \u0625\u0636\u0627\u0641\u0629 \u0639\u0645\u064A\u0644 \u062C\u062F\u064A\u062F ")]),_:1},8,["href"])])]),default:v(()=>[t("div",P,[t("div",Q,[t("div",R,[t("div",W,[t("div",X,[t("div",Y,[Z,t("div",tt,[et,t("p",st,a(d.value.total_clients),1)])])])]),t("div",ot,[t("div",at,[t("div",nt,[it,t("div",rt,[lt,t("p",dt,"$"+a(h(d.value.total_required)),1)])])])]),t("div",ct,[t("div",ht,[t("div",ut,[_t,t("div",mt,[pt,t("p",xt,"$"+a(h(d.value.total_paid)),1)])])])]),t("div",gt,[t("div",vt,[t("div",ft,[yt,t("div",wt,[bt,t("p",{class:b(["text-2xl font-semibold",C(d.value.total_debt)])},"$"+a(h(d.value.total_debt)),3)])])])]),t("div",kt,[t("div",Ct,[t("div",Mt,[jt,t("div",zt,[Bt,t("p",Ht,a(d.value.clients_with_debt),1)])])])]),t("div",$t,[t("div",Lt,[t("div",Vt,[St,t("div",Et,[Nt,t("p",qt,a(d.value.clients_paid_off),1)])])])])]),t("div",At,[t("div",Dt,[t("div",Ft,[Ut,t("button",{onClick:p,disabled:_.value,class:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200 flex items-center gap-2 disabled:opacity-50"},[_.value?(i(),r("svg",It,Jt)):(i(),r("svg",Kt,Qt)),w(" \u062A\u062D\u062F\u064A\u062B ")],8,Tt)]),_.value?(i(),r("div",Rt,Xt)):f.value.length===0?(i(),r("div",Yt,se)):(i(),r("div",oe,[t("table",ae,[ne,t("tbody",ie,[(i(!0),r(z,null,U(f.value,s=>(i(),r("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",re,a(s.id),1),t("td",le,a(s.name),1),t("td",de,a(s.phone||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),1),t("td",ce," $"+a(h(s.total_required)),1),t("td",he," $"+a(h(s.total_paid)),1),t("td",{class:b(["px-6 py-4 whitespace-nowrap text-sm font-medium",C(s.remaining_debt)])}," $"+a(h(s.remaining_debt)),3),t("td",ue,[t("span",{class:b(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",M(s.remaining_debt).class])},a(M(s.remaining_debt).text),3)]),t("td",_e,[t("div",me,[s.email!=="admin@admin.com"?(i(),r("button",{key:0,onClick:n=>S(s),class:"text-blue-600 hover:text-blue-900 px-3 py-1 rounded-md bg-blue-50 hover:bg-blue-100 transition-colors duration-200"}," \u062A\u0639\u062F\u064A\u0644 ",8,pe)):k("",!0),s.email!=="admin@admin.com"?(i(),r("button",{key:1,onClick:n=>V(s.id),class:"text-red-600 hover:text-red-900 px-3 py-1 rounded-md bg-red-50 hover:bg-red-100 transition-colors duration-200"}," \u062D\u0630\u0641 ",8,xe)):k("",!0)])])]))),128))])])]))])])])]),g(G,{show:y.value,onClose:x},{default:v(()=>[t("div",ge,[t("div",{class:"flex items-center justify-between mb-4"},[ve,t("button",{onClick:x,class:"text-gray-400 hover:text-gray-600"},ye)]),t("form",{onSubmit:T(E,["prevent"]),class:"space-y-4"},[t("div",null,[be,B(t("input",{type:"text",id:"client_name","onUpdate:modelValue":c[0]||(c[0]=s=>o.value.name=s),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\u0623\u062F\u062E\u0644 \u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u064A\u0644"},null,512),[[H,o.value.name]])]),t("div",null,[ke,B(t("input",{type:"text",id:"client_phone","onUpdate:modelValue":c[1]||(c[1]=s=>o.value.phone=s),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\u0623\u062F\u062E\u0644 \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641"},null,512),[[H,o.value.phone]])]),t("div",Ce,[t("button",{type:"button",onClick:x,class:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors duration-200"}," \u0625\u0644\u063A\u0627\u0621 "),t("button",{type:"submit",disabled:m.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[m.value?(i(),r("svg",je,He)):k("",!0),w(" "+a(m.value?"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u062F\u064A\u062B...":"\u062A\u062D\u062F\u064A\u062B"),1)],8,Me)])],40,we)])]),_:1},8,["show"])]),_:1})],64))}};export{qe as default};
