import{_ as j}from"./AuthenticatedLayout.3efbad45.js";import{m as n,o as s,d as w,e as p,h as e,a as o,y as b,n as _,t as a,F as k,j as m,g as h,u as L,L as V}from"./app.224419f7.js";import{a as C}from"./index.5d13e94f.js";const H=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," \u0625\u062F\u0627\u0631\u0629 \u0642\u0627\u0633\u0629 \u0627\u0644\u0632\u0628\u0648\u0646 ",-1),D={class:"py-12"},S={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},$={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},A={class:"p-6 text-gray-900"},E={class:"mb-8"},N=e("h3",{class:"text-lg font-medium mb-4"},"\u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0632\u0628\u0648\u0646",-1),W={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},F=["onClick"],T={class:"flex items-center space-x-3"},I={class:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center"},U={class:"text-blue-600 font-medium"},q={class:"font-medium text-gray-900"},G={class:"text-sm text-gray-500"},J={class:"text-xs text-gray-400"},K={key:0,class:"mb-8"},O={class:"bg-gradient-to-r from-green-50 to-blue-50 border-2 border-green-200 rounded-xl p-6 shadow-lg"},P={class:"flex items-center justify-between mb-4"},Q={class:"flex-1"},R={class:"text-2xl font-bold text-gray-800 mb-2"},X={class:"text-gray-600 flex items-center"},Y=e("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1),Z={class:"mt-3 flex items-center"},ee=e("span",{class:"text-sm font-medium text-gray-600 ml-2"},"\u062D\u0627\u0644\u0629 \u0627\u0644\u0642\u0627\u0633\u0629:",-1),te={key:0,class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800"},se=e("svg",{class:"w-4 h-4 ml-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),oe={key:1,class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800"},ae=e("svg",{class:"w-4 h-4 ml-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),le={class:"text-right bg-white rounded-lg p-4 shadow-md"},re={class:"text-3xl font-bold text-blue-600"},ie=e("div",{class:"text-sm text-gray-600 mt-1"},"\u062F\u0648\u0644\u0627\u0631 \u0623\u0645\u0631\u064A\u0643\u064A",-1),ne=e("div",{class:"text-xs text-gray-400 mt-1"},"\u0627\u0644\u0631\u0635\u064A\u062F \u0627\u0644\u062D\u0627\u0644\u064A",-1),de={class:"flex space-x-3 space-x-reverse mt-4 pt-4 border-t border-gray-200"},ce=["disabled"],ue={key:0,class:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},he=e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1),_e=[he],me={key:1,class:"animate-spin w-5 h-5 ml-2",fill:"none",viewBox:"0 0 24 24"},xe=e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),ge=e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),pe=[xe,ge],ve={key:2},ye={key:3},fe=e("svg",{class:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})],-1),we={key:1,class:"mb-4"},be={key:2,class:"mt-8"},ke=e("h3",{class:"text-lg font-medium mb-4"},"\u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062A \u0627\u0644\u0623\u062E\u064A\u0631\u0629",-1),Ce={class:"overflow-x-auto"},ze={class:"min-w-full divide-y divide-gray-200"},Be=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," \u0627\u0644\u0648\u0635\u0641 "),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," \u0627\u0644\u0645\u0628\u0644\u063A "),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," \u0627\u0644\u0646\u0648\u0639 "),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," \u0627\u0644\u062A\u0627\u0631\u064A\u062E ")])],-1),Me={class:"bg-white divide-y divide-gray-200"},je={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Le={class:"px-6 py-4 whitespace-nowrap text-sm"},Ve={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},He={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ee={__name:"CustomerWallet",props:{customers:Array},setup(z){const r=n(null),v=n(0),x=n([]),c=n(!1),u=n(""),g=n(""),d=n(!1),y=async l=>{r.value=l,u.value="";try{const i=await C.get(`/api/customer-wallet/${l.id}`);i.data.success&&(v.value=i.data.balance,x.value=i.data.transactions,d.value=!!(i.data.wallet&&i.data.wallet.id))}catch(i){console.error("Error fetching wallet info:",i),d.value=!1}},B=async()=>{if(!!r.value){c.value=!0;try{const l=await C.post("/api/customer-wallet/create",{customer_id:r.value.id});l.data.success&&(u.value=l.data.message,g.value="success",d.value=!0,await y(r.value))}catch(l){u.value="\u062D\u062F\u062B \u062E\u0637\u0623 \u0641\u064A \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0642\u0627\u0633\u0629",g.value="error",console.error("Error creating wallet:",l)}finally{c.value=!1}}},M=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return(l,i)=>(s(),w(j,null,{header:p(()=>[H]),default:p(()=>[e("div",D,[e("div",S,[e("div",$,[e("div",A,[e("div",E,[N,e("div",W,[(s(!0),o(k,null,b(z.customers,t=>{var f;return s(),o("div",{key:t.id,onClick:De=>y(t),class:_(["p-4 border rounded-lg cursor-pointer transition-all duration-200",((f=r.value)==null?void 0:f.id)===t.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"])},[e("div",T,[e("div",I,[e("span",U,a(t.name.charAt(0)),1)]),e("div",null,[e("h4",q,a(t.name),1),e("p",G,a(t.email),1),e("p",J,"ID: "+a(t.id),1)])])],10,F)}),128))])]),r.value?(s(),o("div",K,[e("div",O,[e("div",P,[e("div",Q,[e("h3",R," \u0627\u0644\u0632\u0628\u0648\u0646: "+a(r.value.name),1),e("p",X,[Y,m(" "+a(r.value.email),1)]),e("div",Z,[ee,d.value?(s(),o("span",te,[se,m(" \u062A\u0645 \u0627\u0644\u0625\u0646\u0634\u0627\u0621 ")])):(s(),o("span",oe,[ae,m(" \u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0625\u0646\u0634\u0627\u0621 ")]))])]),e("div",le,[e("div",re," $"+a(Math.round(v.value).toLocaleString()),1),ie,ne])]),e("div",de,[d.value?h("",!0):(s(),o("button",{key:0,onClick:B,disabled:c.value,class:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center justify-center shadow-md"},[c.value?(s(),o("svg",me,pe)):(s(),o("svg",ue,_e)),c.value?(s(),o("span",ve,"\u062C\u0627\u0631\u064A \u0627\u0644\u0625\u0646\u0634\u0627\u0621...")):(s(),o("span",ye,"\u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0642\u0627\u0633\u0629"))],8,ce)),d.value?(s(),w(L(V),{key:1,href:l.route("simple-cash",{customer_id:r.value.id}),class:"flex-1 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-6 py-3 rounded-lg font-bold transition-all duration-200 flex items-center justify-center shadow-md"},{default:p(()=>[fe,m(" \u0627\u0644\u062F\u062E\u0648\u0644 \u0625\u0644\u0649 \u0627\u0644\u0642\u0627\u0633\u0629 ")]),_:1},8,["href"])):h("",!0)])])])):h("",!0),u.value?(s(),o("div",we,[e("div",{class:_(["p-4 rounded-lg",g.value==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},a(u.value),3)])):h("",!0),r.value&&x.value.length>0?(s(),o("div",be,[ke,e("div",Ce,[e("table",ze,[Be,e("tbody",Me,[(s(!0),o(k,null,b(x.value,t=>(s(),o("tr",{key:t.id},[e("td",je,a(t.description),1),e("td",Le,[e("span",{class:_(["font-medium",t.type==="in"?"text-green-600":"text-red-600"])},a(t.type==="in"?"+":"-")+"$"+a(Math.round(t.amount).toLocaleString()),3)]),e("td",Ve,[e("span",{class:_(["px-2 py-1 rounded-full text-xs font-medium",t.type==="in"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},a(t.type==="in"?"\u0625\u064A\u062F\u0627\u0639":"\u0633\u062D\u0628"),3)]),e("td",He,a(M(t.created_at)),1)]))),128))])])])])):h("",!0)])])])])]),_:1}))}};export{Ee as default};
